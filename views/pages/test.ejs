<!DOCTYPE html>
<html>

<body>


  <output id="grain">0</output> -- <output id="lumber">0</output> -- <output id="stone">0</output> -- <output
    id="iron">0</output> -- <output id="gold">0</output>
  <form id="form" action="">
    <input id="input" autocomplete="off" /><button>Send</button>
  </form>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io();

    //fix
    socket.on('sync', async function () {
      console.log("connecting ")
      await fetchAsync(`/getUser/${socket.id}`)
    });

    socket.on('updateGrain', async function (msg) {
      document.getElementById("grain").innerHTML = msg;
    });
    socket.on('updateLumber', async function (msg) {
      document.getElementById("lumber").innerHTML = msg;
    });
    socket.on('updateStone', async function (msg) {
      document.getElementById("stone").innerHTML = msg;
    });
    socket.on('updateIron', async function (msg) {
      document.getElementById("iron").innerHTML = msg;
    });
    socket.on('updateGold', async function (msg) {
      document.getElementById("gold").innerHTML = msg;
    });

    socket.on('msg', async function (msg) {
      console.log(msg)
    });

    async function fetchAsync(url) {
      let response = await fetch(url);
      let data = await response.json();
      return data.username;
    }
  </script>



</body>

</html>