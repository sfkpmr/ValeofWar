<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="static/style2.css" />

</head>

<body>

  <div class="topnav">
    <a href="/town" target="iframe">Town</a>
    <a href="/land" target="iframe">Land</a>
    <a href="/mailbox" target="iframe">Mailbox</a>
    <a href="/profile" target="iframe">Profile</a>
    <a href="/logout">Log out</a>
  </div>
  <div class="sidenav">
    <br>
    <br>
    <br>
    <br>
    <br>
    <t> <img src="../static/images/grain.png" alt="Grain" title="Grain"> <output id="grain">
        <%= grain %>
      </output> </t><br>
    <t> <img src="../static/images/wood.png" alt="Lumber" title="Lumber"> <output id="lumber">
        <%= lumber %>
      </output> </t><br>
    <t> <img src="../static/images/stone.png" alt="Stone" title="Stone"> <output id="stone">
        <%= stone %>
      </output> </t><br>
    <t> <img src="../static/images/iron-ingots.png" alt="Iron" title="Iron"> <output id="iron">
        <%= iron %>
      </output> </t><br>
    <t><img src="../static/images/gold-ingots.png" alt="Gold" title="Gold"> <output id="gold">
        <%= gold %>
      </output> </t><br>
    <hr class="solid">
    <t><output id="recruits">Recruits: <%= recruits %></output></t><br>
    <t><output id="horses">Horses: <%= horses %></output></t><br>
    <hr class="solid">
    <t>Archers: <output id="archers">
        <%= archers %>
      </output></t><br>
    <t>Spearmen: <output id="spearmen">
        <%= spearmen %>
      </output></t><br>
    <t>Swordsmen: <output id="swordsmen">
        <%= swordsmen %>
      </output></t><br>
    <t>Horsemen: <output id="horsemen">
        <%= horsemen %>
      </output></t><br>
    <t>Knights: <output id="knights">
        <%= knights %>
      </output></t><br>
    <t>Battering rams: <output id="batteringrams">
        <%= batteringrams %>
      </output></t><br>
    <t>Siege towers: <output id="siegetowers">
        <%= siegetowers %>
      </output></t><br>
    <hr class="solid">
    <t>Attack power: <output id="attack">
        <%= attackValue %>
      </output></t><br>
    <t>Defense power: <output id="defense">
        <%= defenseValue %>
      </output></t><br>
    <t>Incomes</t>
  </div>



  <div class="main">
    <iframe src="/town" name="iframe" frameBorder="0"></iframe>
  </div>


  <script src="/socket.io/socket.io.js">
    var socket = io();

    //fix
    socket.on('sync', async function () {
      console.log("Socket connected.")
      await fetch(`/getUser/${socket.id}`)
    });

    socket.on('updateGrain', async function (msg) {
      document.getElementById("grain").innerHTML = msg;
    });
    socket.on('updateLumber', async function (msg) {
      document.getElementById("lumber").innerHTML = msg;
    });
    socket.on('updateStone', async function (msg) {
      document.getElementById("stone").innerHTML = msg;
    });
    socket.on('updateIron', async function (msg) {
      document.getElementById("iron").innerHTML = msg;
    });
    socket.on('updateGold', async function (msg) {
      document.getElementById("gold").innerHTML = msg;
    });
    socket.on('updateRecruits', async function (msg) {
      document.getElementById("recruits").innerHTML = msg;
    });
    socket.on('updateHorses', async function (msg) {
      document.getElementById("horses").innerHTML = msg;
    });
    socket.on('updateArchers', async function (msg) {
      document.getElementById("archers").innerHTML = msg;
    });
    socket.on('updateSpearmen', async function (msg) {
      document.getElementById("spearmen").innerHTML = msg;
    });
    socket.on('updateSwordsmen', async function (msg) {
      document.getElementById("swordsmen").innerHTML = msg;
    });
    socket.on('updateHorsemen', async function (msg) {
      document.getElementById("horsemen").innerHTML = msg;
    });
    socket.on('updateKnights', async function (msg) {
      document.getElementById("knights").innerHTML = msg;
    });
    socket.on('updateBatteringRams', async function (msg) {
      document.getElementById("batteringrams").innerHTML = msg;
    });
    socket.on('updateSiegeTowers', async function (msg) {
      document.getElementById("siegetowers").innerHTML = msg;
    });
    socket.on('updateAttackPower', async function (msg) {
      document.getElementById("attack").innerHTML = msg;
    });
    socket.on('updateDefensePower', async function (msg) {
      document.getElementById("defense").innerHTML = msg;
    });

  // socket.on('msg', async function (msg) {
  //   console.log(msg)
  // });

 // async function fetchAsync(url) {
 //    await fetch(url);
    //let data = await response.json();
   // return data.username;
 // }
  </script>

</body>

</html>